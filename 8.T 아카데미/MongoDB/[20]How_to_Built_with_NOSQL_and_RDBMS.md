1. 복합 시스템 설계

### 기본 컨셉

**Application Side Join**
 - 기존 시스템은 모든 종료의 데이터를 무조건 RDBMS에 저장하고, RDBMS내에서 처리하도록 설계되고 구현되었음
 - RDBMS에만 지나치게 의존하는 방식으로 설계하여, 상대적으로 우선순위가 낮고 대량의 트랜잭션을 발생시키는 데이터들로 인해서 비중이 높은 중요한 데이터의 처리가 지연되는 문제를 야기함
 - NOSQL을 도입하여 우선순위가 낮고 대량으로 트랜잭션을 발생시키는 데이터들을 NOSQL에서 처리
 - RDBMS는 중요한 데이터 처리에만 집중할 수 있기 때문에, 쾌적한 환경에서 최상의 결과를 만들어낼 수 있음
 - 데이터의 성격에 따라 RDBMS와 NOSQL로 분산해서 처리함으로 인해 전체시스템의 퍼포먼스가 향상되는 장점을 가짐
 - 하나의 웹페이지(하나의 화면)에서 보여줘야 하는 데이터가 여러 종류의 데이터베이스에 나뉘어 저장하기 때문에, 하나의 데이터베이스 내에서 JOIN을 수행하는 것이 불가능함
 - 따라서, 웹 페이지를 랜더링하는 웹 프로그램에서 각각의 데이터베이스에서 조회한 결과를 가져온 다음, 한 화면에서 보여질 수 있도록 프로그램 상에서 JOIN을 수행해야 함
 - 이렇게 데이터베이스 내에서가 아니라 클라이언트 프로그램 상에서 JOIN을 수행하는 것을 "Application Side Join"

 ![스크린샷 2017-04-07 오후 6.24.26](http://i.imgur.com/eAWg6s8.png)

: 이제는 다양한 종류의 데이터베이스를 사용하여 고객에서 신속하게 정보를 제공한다.

**Data Export/Import**
  - RDBMS/NOSQL에 저장된 데이터를 Hadoop에서 처리를 하려면 HDFS상에 파일 형태로 변환 해주어야 함
  - 이떄 다양한 DBMS/NOSQL의 데이터를 HDFS로 Import/Export해주는 "Sqoop"과 같은 Hadoop Echosystem을 사용해야 함

스쿱이라는 도구를 사용해 데이터를 가공한다!!

![스크린샷 2017-04-07 오후 6.26.53](http://i.imgur.com/tyXRKKr.png)

  - 정형화된 데이터 처리
      - Sqoop
      - hihi
  - 비정형화된 데이터 처리
      - Flume
      - Scribe

![스크린샷 2017-04-07 오후 6.28.35](http://i.imgur.com/c0LX3fC.png)

**Batch Processing**
 - 빅데이터 분석시, 자동화된 병렬처리/분산처리를 지원하는 MapReduce를 많이 사용하며 대표적인 솔루션이 'Hadoop'임
 - Hadoop은 "배치형 데이터 처리 시스템"이며 Map단계와 Reduce단계를 순차적으로 실행하여 결과를 만듦

 ![스크린샷 2017-04-07 오후 6.31.22](http://i.imgur.com/kgqICM7.png)

### 2.데이터 수집/가공/서비스 과정

##### 데이터 수집
 - 다양한 서비스에서 제공되는 RESTful API를 사용하여 데이터 수집JSON,XML
 - 별도의 API를 제공하지 않는 웹 사이트의 데이터를 수집하고자 할 떄에는 크롤링 사용하여 데이터 수집
 - 데이터 수집 자동화를 위해 전용 로봇을 만들어서 주기적으로 실행
 - 수집되는 데이터의 양이 많고, 수집 속도가 빠르기 때문에 수집되는 데이터는 NOSQL에 저장할 것을 권장
 - 수집하는 데이터는 정보로 가공되기 전의 소스 데이터이기 때문에, 데이터를 쌓아놓는 작업에 유리한 MongoDB가 적합

![스크린샷 2017-04-07 오후 6.34.08](http://i.imgur.com/pdJJ0X8.png)

##### 데이터 분석
 - 1차적으로 수집한 데이터는 Hadoop을 이용하여 데이터 가공하는 작업을 진행하기 위해 HDFS상에 Import시킴
 - 분석 작업을 위해 프로그래밍된 Hadoop 프로그램을 주기적으로 실행시켜서 최신 분석 결과를 생성함
 - 생성된 분석 결과는 사용자에게 서비스할 떄 사용하는 데이터베이스에서 사용될 수 있는 형태의 데이터로 Export시킴
 - 데이터를 수집하고, 수집된 데이터를 분석하는 데에는 일정한 시간이 소요되기 때문에, "실시간 처리"는 물리적으로 불가능함
 - 다만 데이터 분석 주기를 최대한 짦게 함으로써 실시간에 가까운 최신 데이터를 사용할 수 있도록 만들어주는 것이 현실적임

 ![스크린샷 2017-04-07 오후 6.39.38](http://i.imgur.com/NGiiCom.png)

##### 결과 데이터 서비스
  - Hadoop을 이용하면 신속하게 처리된 결과 데이터를 웹/앱 서비스를 하기 위해 운영하는 RDBMS에 저장해줌
  - RDBMS는 직접 연상을 수행하지 않고, 처리 결과만을 저장하고 필요시 사용자에게 전달해주는 역할만 하기 때문에 오버헤드가 적음
  - Hadoop이 주기적으로 실행되면서 최신 데이터를 계속 갱신해주기 때문에 저장된 데이터를 제공하는 것만 신경쓰면 됨.
  
![스크린샷 2017-04-07 오후 6.44.02](http://i.imgur.com/82dOtQf.png)

### 3.다중플랫폼 지원 채팅 서비스 구축 사례
![스크린샷 2017-04-07 오후 6.45.50](http://i.imgur.com/qG9WVv3.png)

![스크린샷 2017-04-07 오후 6.46.45](http://i.imgur.com/6vbvAKH.png)

![스크린샷 2017-04-07 오후 6.47.49](http://i.imgur.com/tO7OqBm.png)

![스크린샷 2017-04-07 오후 6.48.59](http://i.imgur.com/JazV8vU.png)
