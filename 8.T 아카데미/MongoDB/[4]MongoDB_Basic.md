
### 특징
 - 메모리맵 형태의 파일엔진 DB이기 때문에 메모리에 의존적
 - 쌓아놓고 삭제가 없는 경우가 적합
    - '로그 데이터'
    - '이벤트 참여내역'
    - '세션'
 - 트랙잭션이 필요한 금융 결제 빌링 회원정보에는 부적합.
 - 모든 것을 MongoDB로 해결해려고 하지 않는다!

 **도큐먼트 데이터 모델**
=> 도큐먼트 형태라는 것을 기업하자!!
 - 속성의 이름과 값으로 이루어진 쌍의 집합
 - 속성은 문자열이나 숫자, 날짜 가능
 - 배열 또는 다른 도큐먼트를 지정하는 것도 가능함
 - 하나의 document에 필요한 정보를 모두 담아야 함
 - one query모두 해결이 되게끔 collection model 설계해야함
 - Join이 불가능하므로 미리 embedding 시켜야함
=>  데이터 설계를 "종이 문서"설계 하듯이 설계해야 한다.

**JSON**
- lightweight data 교환 방식
- 사람이 읽고 쓰기 쉽고, 기계가 파싱하기 쉬움
- 각 객체는 중괄호로 시작하고 끝남
- 문자열과 값으로 구성되어 있고 콜론으로 구분
- 각 멤버들은 콤마로 구분
- 값은 object, string, number, array, true, false,null사용 가능
- 배열의 경우 대괄호로 시작하고, 문자의 경우 큰 따움표 사용한다.

**MongoDB장점**
- Schema-less구조
- Read/Write 성능 띄어남
- Scale Out구조
- Json구조
- 빅데이터 처리 특화
  - Memory Mapped를 사용
  - OS메모리를 활용하기 때문에 메모리가 차면 하드디스크로 데이터 처리
  - 하드웨어 비용을 높여야함

**MongoDB단점**
- 아무래도 불안정한 부분이 있다.
- 손실되는 데이터가 존재함
- Join을 지원하지 않음.

**MongoDB Query**
1. CREATE => db.person.save({'name':'jone'});
2. READ => db.person.find()
기타 등등

**MongoDB Index**
- 다수 인덱스 구조 구성
- 복합 인덱스 지원
- 빠른 검색 지원
- 도큐먼트에 저장된 데이터와 중복 저장문제
- 메모리가 부족한 시스템에서는 검색 속도 저하 문제

**MongoDB 복제**
- Master-Slave 구조 구성
- 데이터복사본을 Slave에 배치
- Master장에에 따른 데이터 손실 없이 Slave데이터 사용 가능
- Master장애가 발생했을때, Slave에서 Master를 선출 가능(**중단없는 서비스 가능**)
- 데이터 손실을 최소화하기 위해 저널링 지원(MongoDB의 데이터 변화에 따른 모든 연산에 대한 로그 적재)

**MongoDB 샤딩**
- 대용량의 데이터를 저장하기 위한 방법
  - 소프트웨어적으로 데이터베이스를 분산시켜 처리하는 구조
- 샤딩방식
  - 데이터베이스가 저장하고 있는 테이블을 테이블 단위로 분리하는 방법
  - 데이터베이스가 저장하고 있는 테이블 자체를 분할하는 방법
- 분산 데이터베이스의 전통적인 분할 3계층 구조 지원
  - 응용 계층, 중개자 계층, 데이터 계층
  - 응용 계층은 데이터에 접근하기 위해 중개자를 통해 모든 데이터의 입출력을 처리
  - 추상화된 한개의 데이터베이스가 존재하는 것처럼 운용

MongoDB 샤딩원리 그림 기억하기!

**MongoDB 맵리듀스**
- 대용량의 데이터를 안전하고 빠르게 처리하기 위한 방법
  - 데이터를 분산하여 연산하고 다시 합치는 기술
  - 맵과 리듀스 단계로 나누어 처리하며, 사용자가 임의 코딩가능
  - 입/출력 데이터는 Key-Value형태로 구성
- 한대 이상의 하드웨어를 활용하는 분산 프로그래밍 모델
  - 분산을 통해 분할된 조각으로 처리한 다음, 다시 모아서 휠씬 잛은 시간에 계산을 완료
- 대용량 파일에 대한 로그 분석, 색인 구축 검색 등에 활용
- 일괄처리 방식으로 전체 데이터 셋을 분석할 필요가 있는 문제에 적합

-----

#### MongoDB의 동작 방식 및 기본 동작 원리

**구성**
- MongoDB는 수평적 확장이라는 특징을 가짐
- 한 대 이상의 서버로 구성하는 것이 일반적
- MongoDB는 메모리 사용 가능량에 대비하여 성능이 좌우되기 떄문에 독립된 서버에서 실행을 권장
- 기본적으로 MongoDB는 Mongod 라는 실행파일을 단위로 실행
- 데이터를 한곳에만 저장하면 데이터 손상 시 복구가 불가능하기 때문에 보통 3개의 Replica 단위로 구성하여 데이터를 복제
- mongos 서버를 통해 마치 한대의 데이터베이스 서버처럼 사용 가능

Mongod는 실행 주체!!

**설치**
MongoDB를 사용하는 대부분의 유저는 90%가 리눅스 사용

철학
"메모리 관리는 운영체제에 맡기자."

원도우횽은 설치 및 사용은 간편함.


Node.js 기본 개념

MongoDB는 다양한 언어를 통해 사용 가능
여기서는 Javascript를 기준으로 설명
