# 1.  Intro  

## 1.1  Code를 리뷰하는 사람들은 어떤 것을 중점적으로 살펴야 하는가?  

​	**디자인(Design)**: 코드가 잘 설계되어 있고 시스템에 적합한가?  
​	**기능성(Functionality)**: 코드가 작성자의 의도대로 동작하는가?  
​	**복잡성(Complexity)**: 코드가 더 간단히 작성될 수 있는가? 다른 개발자가 코드를 쉽게 이해하고 사용 할 수 있는가?  
​	**테스트(Tests)**: 코드에 정확하고 잘 설계된 자동 테스트가 있는가?  
​	**이름짓기(Naming)**: 개발자가 변수, 클래스, 메소드(함수)등에 명확한 이름을 선택했는가?  
​	**주석(Comments)**: 주석이 명확하고 유용한가?  
​	**스타일(Style)**: 코드가 스타일 가이드를 따르는가?  
​	**문서화(Documentation)**: 개발자가 관련문서를 작성하거나 적절하게 업데이트 하였는가?	    
​	

## 1.2 좋은 리뷰어 정하기.    

​	리뷰에 응답할 수 있는 좋은 리뷰어를 정하는 것. 리뷰어는 `작성하는 코드에 대해 가장 철저하고 정확한 리뷰를 제공할 수 있는 사람` 
​	

## 1.3 In-person 리뷰  

​	위에서 정한 좋은 리뷰어와 페어 프로그래밍을 하면 해당 코드가 검토된 것으로 간주.

---

# 2. The Standard of Code Review

- 코드 작성자가 자신의 작업을 진행할 수 있어야 합니다.
- 각 CL(Change List)의 Quaility을 검토하는 것은 리뷰어의 의무입니다.
- 또한 리뷰어는 리뷰중인 코드에 대한 소유권과 책임이 있습니다.
- **일반적으로 리뷰어는 CL의 품질 완벽하지 않다고 하더라도, 작업중인 코드베이스의 상태를 확실히 개선하는 코드인 경우 CL을 승인하는 것에 대해 긍정적으로 생각해야 합니다.**
- 핵심은 `완벽한 코드는 없다. 오로지 더 나은 코드만 있을 뿐이다.` 그렇기 때문에 다음과 같은 원칙을 지켜야 합니다.
  1. 리뷰어는 작성자가 CL의 모든 작은 부분을 완벽하게 구현하도록 요구해서는 안됩니다.
  2. 리뷰어는 자신의 리뷰와 앞으로 진행해야할 Process의 균형을 유지해야 합니다.
  3. 완벽에 대한 추구보다는 지속적 개선을 추구해야 합니다.
  4. CL은 절대 `완벽할 수 없기때문 ` 에 며칠 혹은 몃 주간 리뷰상태로 지연시켜는 안됩니다.
  5. 리뷰어는 항상 더 나아질 수 있는 가능성에 대한 의견을 자유롭게 남겨야 합니다. 다만 그다지 중요하지 않는 의견의 경우 "Nit:" 와 같은 접두어를 붙여줍니다.

## 2.1 멘토링

- 코드 작성자가 새로운 것을 배우는데 도움이 되는 의견을 남기기.

## 2.2 원칙

- 기술적 사실과 데이터는 의견이나 개인 취향보다 우선합니다.
- 스타일 문제에 대해서는 스타일 가이드가 절대적은 위치를 차지합니다.
  - 스타일 가이드에 없는 스타일은 개인적 취향의 문제입니다. 코드 작성자의 스타일이 우선시 됩니다.
  - 스타일 가이드 항목에 있는 것을 어겼을 경우 스타일 가이드가 우선시 됩니다.
- 소프트웨어 디자인은 순수한 스타일 문제가 아닌 개인적인 취향에 지나지 않습니다.
  - 코드 작성자가 자신의 접근 방식이 유효하다는 것을 여러 근거(데이터, 견고한 엔지니어링 원칙 등)를 통해 입증 할 수 있다면, 리뷰어는 코드 작성자의 의견을 수용해야 합니다.
  - 만약 그렇지 못하다면, 소프트웨어 디자인의 표준 원칙에 따라 수용여부를 결정해야 합니다.
- 위의 규칙이 적용되지 않는다면, 코드베이스 전체의 품질을 떨어지지 않는 선에서, 리뷰어는 현재 코드베이스의 내용과 CL의 일관성을 유지할 수 있도록 코드 작성자에게 요청 할 수 있습니다.

## 2.3 갈등 해결

- 첫 번째 단계는 리뷰어와 코드 작성자가 이 문서, 혹은 다른 규칙에 대한 문서와 규약을 기반으로 합의를 시도하는 것입니다.
- 두 번째 단계는 리뷰어와 코드 작성자가 회의 또는 VC(Voice Chat)를 갖는 것이 좋습니다. 토론 결과를 향후 다른 개발자들을 위해 CL의 message에 남기도록 합니다.
- 그래도 해결이 되지 않는다면 이 이슈를 이관하도록 합니다. 광범위한 팀 토론, TL 계량, 코드 관리자에게 결정 요청 등을 하면 됩니다.
- **Don’t let a CL sit around because the author and the reviewer can’t come to an agreement.**  
  (합의에 도달하지 않을 때까지 CL을 보지 마세요.)

---

# 3. What to look for in a code review    

아래 내용을 고려할 때는 항상 2번의 "The Standard of Code Review"를 고려해야 합니다.

## 3.1 디자인(Design)   

- CL내에서 다양한 코드들의 상호작용이 의미가 있는가?
- 이 변경사항이 다른 시스템과 잘 통합되는가?
- 이 변경사항이 코드베이스 또는 라이브러리에 속하는가?
- 이 기능을 추가해도 괜찮은가?

## 3.2 기능성(Functionality)  

- 먼저 이 CL이 코드 작성자의 의도대로 작동하는지,  `사용자` 에게 의도한 것은 무엇인지 확인합니다. 여기서 `사용자` 는 일반적으로 **end user** 와 향후 이 코드를 사용해야 하는 **개발자** 입니다.

- 코드 작성자는 코드를 리뷰할 때까지 충분히 CL을 테스트해야 합니다. 동시에 리뷰어는 edge case에 대해 생각하고, 동시성 문제를 찾고, end user처럼 생각하고, 버그가 없는지 확인해야 합니다.

## 3.3 복잡성(Complexity)   

- 각 라인, 함수, 클래스 등 모든 수준에서 CL의 복잡성을 점검합니다. "너무 복잡하다" 의 의미는 **"코드를 읽는 사람이 빨리 이해할 수 없음"** 을 의미. 이는 **"다른 개발자가 이 코드를 호출하거나 수정하려고 할 때 버그가 발생할 가능성이 있음"**
- 코드 작성자가 필요 이상으로 일반화하거나, 현재 시스템에 필요하지 않는 기능을 추가한 **Over-engineering** 또한 복잡성 증가

## 3.4 테스트(Tests)  

- 코드가 깨지면(broken) 테스트가 실제로 실패하는가?
- 만약 코드가 변경되면 false positives가 실행되는가? (If the code changes beneath them, will they start producing false positives?)
- 각 테스트는 간단하고 유용한 assertion을 수행하는가?
- 테스트가 다른 테스트 메소드와 적절히 분리되어 있는가?

## 3.5 이름짓기(Naming)   

- 좋은 이름은 `읽기 어렵지 않고 의도한 것이 무엇인지 완전히 전달하는 충분히 긴 이름` 입니다.

## 3.6 주석(Comments)  

- 주석이 다른 개발자가 이해하기 쉬운 영어로 되어있는지, 실제로 필요한 주석인지 확인합니다.

- 일반적으로 주석은 `코드가 존재하는 이유를 설명할 때 유용`하며, 일부 코드가 수행하는 작업을 설명해서는 안됩니다.   
  만약 코드 자체가 명확하지 않다면, **코드를 간단하게 만들어야** 합니다. 정규표현식과 같은 몇가지 예외가 있지만, 대부분의 주석은 코드 자체에 포함할 수 없는 정보에 대해 기술해야 합니다.  

  ```
  TIP)
  정규표현식과 복잡한 알고리즘은 수행되는 작업을 설명하는 주석이 큰 도움이 되는 경우가 많습니다.
  ```

## 3.7 스타일(Style)  

CL이 스타일 가이드를 적절히 따랐는지 확인합니다.

스타일 가이드에 없는 부분에 대해 코드 품질 향상에 대한 조언을 주려면 "Nit:" 접두어를 붙입니다. 이는 코드 작성자가 코드를 개선할 수는 있지만 필수는 아니라고 받아들일 수 있습니다. 개인 스타일 설정만으로 CL의 승인을 막아서는 안됩니다.

코드 작성자는 주요 스타일 변경에 대해 다른 변경사항과 섞인채로 리뷰를 요청하면 안됩니다. 이는 CL에서 기능이 변경된 내용을 보기 어렵게하고 병합 및 롤백을 복잡하게 만들어 다른 문제를 만들어 낼 수 있습니다. 그렇기 때문에 코드 작성자는 전체 파일에 대한 스타일을 변경하려면, 기능 변경과 스타일 변경에 대한 CL을 분리하여 내보내야 합니다.

## 3.8 문서화(Documentation)   

CL에 의해 코드를 빌드, 테스트, 릴리즈 방법이 변경되는 경우 README 등 연관된 문서가 업데이트 되었는지 확인합니다. 문서가 없다면 요청하고, 필요하지않다면 삭제를 요청합니다.

## 3.9 모든 줄(Every Line)  

- 리뷰 요청을 받은 코드의 모든 줄을 확인
- 사람이 작성한 클래스, 함수, 코드 블럭은 내부의 내용이 괜찮을거라 생각하며 흝어보면(가볍게 읽으면) 안됩니다. 분명히 일부 코드는 다른 코드보다 신중하게 읽어야 하지만, 적어도 모든 코드가 수행하는 작업을 이해 해야합니다.
- 코드를 읽기 어려워 리뷰속도가 늦어지는 경우, 코드 작성자에게 이를 알리고 코드가 명확해 질 때까지 기다려야 합니다. 만약 당신의 코드를 이해하지 못한다면, 다른 작성자들도 코드를 이해하지 못할 가능성이 큽니다. 그렇기 때문에 코드 작성자에게 코드를 명확하게 개선해 달라고 요청해야하며, 이는 미래의 다른 개발자가 이 코드를 이해하도록 도울 수 있게 됩니다.
- 코드를 이해했지만 코드의 일부를 리뷰할 수 없는경우(보안, 동시성, 접근성, 국제화 등) 다른 적절한 리뷰어를 찾아야 합니다

## 3.10 문맥(Context)  

- CL을 넓은 맥락에서 바라보는 것이 종종 도움이 됩니다. 일반적으로 코드 리뷰 툴은 변경되는 부분 주위에 몇 줄의 코드만 표시합니다. 때로는 해당 CL이 실제로 의미가 있는지 전체 파일을 살펴봐야합니다. 예를 들어, 해당 CL에서 메소드에 네 줄을 추가하지만, 결과적으로 해당 메소드가 50라인이 되어 refactoring이 필요할수도 있습니다.
- 시스템 전체의 맥락에서 해당 CL을 생각하는 것도 유용합니다. CL이 시스템의 코드 상태를 개선하는지, 아니면 더 복잡하게 만드는지 등, 여러 각도에서 보아야 합니다. **절대 시스템 코드의 상태를 저하시키는 CL을 허용해서는 안됩니다.** 대부분의 시스템은 추가되는 많은 작은 변경사항들을 통해 복잡해 지므로, 새로운 변경사항에서 작은 복잡성을 방지하는 것이 중요합니다.

## 3.11 Good Things  

- 코드 리뷰를 실수에만 초첨을 맞추지말고, 좋은 부분에 대한 격려와 감사 역시 제공해야 합니다. 멘토링 측면에서, 코드 작성자에게 잘못된 점을 말하는 것 보다 **잘한 점을 말하는 것이 더 가치있는 경우가 있습니다.**

## 3.12 Summary   

- 코드 리뷰시 다음 사항을 확인합니다.
  - 코드가 잘 설계되었는가?
  - 이 기능이 사용자(end user와 다른 개발자)들에게 좋은 기능인가?
  - 모든 UI변경이 합리적이고 보기 좋은가(look good)?
  - 모든 병렬 프로그램이 안전하게 작동하는가?
  - 코드가 필요 이상으로 복잡하지 않은가?
  - 개발자가 미래가 아닌 현재 필요한 것을 구현하였는가(over-engineering 하지 않았는가)?
  - 코드에 적절한 unit test가 있는가?
  - 테스트가 잘 설계되었는가?
  - 코드 작성자가 적절한 이름을 선택하였는가?
  - 주석이 명확하고 유용하며 코드 자체가 아닌 코드의 존재이유를 설명하는가(explain *why* instead of *what*)?
  - 코드가 적절히 문서화 되었는가?
  - 코드가 팀의 스타일 가이드를 따르고 있는가?

리뷰 요청을 받은 코드의 **모든 줄** 을 리뷰하고, **문맥과 상황** 을 잘 살펴보고, 코드 **상태를 개선** 하고, 코드 작성자가 시도한 **좋은 일에 대해 칭찬** 합니다.

---

# 4. Navigating a CL in reviews  

여러 파일에 걸친 리뷰를 관리하는 가장 효율적인 방법은 무엇일까?

1. 변경한 부분이 의미가 있는지, 그것에 대한 좋은 설명이 있는지 확인합니다.
2. 변경한 부분의 가장 중요한 부분을 먼저 읽습니다. 그 부분은 전체적으로 설계가 잘 되어있는지 확인합니다.
3. CL의 나머지 부분을 적절한 순서로 읽습니다.

## 4.1 Step One: 변화를 폭 넓게 고려하기(Take a broad view of the chagne)    

- 우선 CL의 description을 읽고 CL에서 변경된 동작(기능)을 확인합니다. 변경한 부분이 의미가 있나요? 만약 이런 변경이 일어나지 않았어야 하는경우, 그것에 대해 설명을 통해 즉시 응답해야합니다. 

- 이와 같은 변경한 부분에 대해 리뷰어가 거부 의사를 표시한 경우 코드 작성자에게 **대신 수행해야할 작업을 제안** 하는 것이 좋습니다.

  예를들어 다음과 같이 말할 수 있습니다:
  **"감사합니다! 그러나 실제로는 당신이 수정하려는 FooWidget을 시스템에서 제거하려고합니다. 그렇기 때문에 FooWidget에 대해 새로운 변경을 하기에는 적절하지 않다고 생각합니다. 대신 새로운 BarWidget을 refactoring하는 것은 어떤가요?"**

- 리뷰어가 현재의 CL을 거부하고 대안을 제시했을 뿐만 아니라, 이를 정중하게 했다는 점을 주의 깊에 봐야합니다. 이런 예의는 우리가 개발자로서 서로를 존중한다는 것을 보여주기때문에 매우 중요합니다.

- 만약 원하지 않는 변경사항이 포함된 CL이 몇 개 이상 있는 경우, 개발 프로세스를 다시 설정하여 CL이 작성되기 전에 많은 의사소통이 이루어 지도록 해야합니다. 시스템에서 삭제하거나, 과감하게 다시 써야 하는 엄청난 일을 다른 사람이 하기 전에 **"no"**라고 말하는 것이 좋습니다.  

  ```
  TIP)
  즉, 기능을 개발, 수정, 삭제하기 전에 모두와 충분한 커뮤니케이션을 통해 불필요한 작업을 막는 것이 중요합니다.
  ```

## 4.2 Step Two: CL의 주요 부분을 검사합기(Examine the main parts of the CL)  

- CL의 주요 변경사항이 포함된 파일을 찾습니다. 논리적으로 가장 많은 라인 수의 변경 사항이 있는 파일이 CL의 주요 부분일 확률이 높습니다. 이 부분을 먼저 읽습니다. 

- 이 부분은 CL의 모든 작은 부분에 대한 문맥(context)를 제공하고, 코드 리뷰 속도를 가속화할 수 있게 해줍니다. CL이 너무 커서 주요 부분을 알아낼 수 없는 경우, 코드 작성자에게 주요 부분에 대해 문의하거나 CL을 분할하도록 요청합니다.

- CL의 주요 부분에서 중대한 설계상의 문제가 있는경우, 나머지 CL을 검토할 시간이 없더라도 즉시 의견(comment)을 남겨야합니다. 

- 실제로 CL의 나머지 부분을 검토하는 것은 시간낭비일 수 있습니다. 설계 문제가 심각하다면, 리뷰중인 많은 코드가 사라지기 때문입니다.

  **주요 설계에 문제가 있을경우, 의견을 즉시 전달하는 것이 왜 중요한지에 대한 이유는 다음과 같습니다.**

  1. 코드 작성자는 종종 해당 CL의 리뷰를 기다리는 동안 해당 CL을 기반으로 즉시 새 작업을 시작하는 경우가 있습니다. 이는 리뷰중인 CL에 주요 설계 문제가 있는 경우, 나중에 다시 작업해야할 우려가 있습니다. 문제가 있는 설계를 토대로 너무 많은 추가 작업을 수행하기 전에 그 문제를 해결해야합니다.
  2. 주요 설계 변경은 작은 변경보다 시간이 오래 걸립니다. 개발자들은 거의 모두 `일정`이 있습니다. 이 `일정`을 지키고 코드베이스의 품질을 유지하려면, 코드 작성자는 가능한 빨리 CL을 재작업 해야합니다.

## 4.3 Step Three: 나머지 부분을 적절한 순서로 살펴보기 (Look through the rest of the CL in an appropriate sequence)  

- CL 전체에 중대한 설계문제가 없다는 것이 파악되었다면, 파일을 리뷰할 수 있는 논리적 순서를 파악하면서 나머지를 리뷰합니다. 
- 일반적으로 주요 파일을 살펴본 후에는 코드 리뷰 툴이 제시하는 순서대로 각 파일을 살펴보는 것이 가장 간단합니다.
- 때로는 주요 부분을 읽기전에 먼저 테스트 코드를 읽는것이 도움이 됩니다. 변경 사항이 무엇인지 쉽게 파악할 수 있기 때문입니다.
  

---

# 5. How to write code review comments  

## 5.1 왜 코드 리뷰는 빨라야 하는가?(Why Shoud Code Reviews Be Fest?)    

***개별 개발의 속도도 중요하지만, 팀 전체의 속도만큼 중요하지는 않습니다.***

코드 리뷰가 느리다면 몇 가지 일이 발생합니다.

1. 팀 전체의 속도가 감소합니다.

   : 리뷰에 빠르게 응답하지 않는 각 개발자들은 다른 작업을 수행할 수 있지만, 나머지 팀의 새로운 기능 추가 및 버그수정이 지연됩니다.

2. 개발자들이 코드 리뷰 프로세스에 항의하기 시작합니다.

   : 리뷰어가 며칠에 한 번씩 응답하면서 CL에 대한 주요 변경을 요청하는 경우 개발자들의 불만이 생길 수 있습니다. 반면에, 리뷰어가 동일한 요청을 하지만 코드 작성자가 업데이트 할 때 마다 신속하게 응답하면 불만이 사라지는 경향이 있습니다. **코드 리뷰 프로세스에 대한 대부분의 불만은 프로세스의 속도를 높이면 해결됩니다.**

3. 코드베이스에 영향을 줄 수 있습니다.

   : 리뷰가 느리면, 개발자 가능한 좋지 않은 수준의 CL을 제출해야 한다는 압력이 가중됩니다. 또한 느린 리뷰는 코드 정리, refactoring 및 기존 CL의 추가 개선도 나쁜 영향을 받습니다.

## 5.2 코드 리뷰는 얼마나 빨리 해야하는가?(How Fast Should Code Reviews Be?)  

- 만약 개발자가 중요한 과제를 수행중이 아니라면(not in the middle of a focused task), **리뷰 요청이 들어온 직후에 리뷰를 시작** 해야합니다.

- 영업일 기준 1일은 리뷰 요청에 응답하는데에 걸리는 최대 시간입니다. 즉, 다음날 아침에 가장 먼저 해야합니다.

- 이 지침을 준수한다는 것은 일반적인 CL이 필요한경우 하루에 여러번 리뷰를 받아야한다는 것을 의미합니다.

## 5.3 속도 vs 중단(Spped vs Interruption)  

- 개인의 속도에 대한 고려가 팀 속도보다 우선시되는 경우가 있습니다. **만약 당신이 코드 작성과 같이 집중적인 작업을 하는 중(in the middle of a focused task)이라면, 리뷰를 위해 자기 자신을 방해하지마세요.**

- 한 연구에 따르면 개발자가 개발 흐름을 놓쳤다가, 다시 그 흐름으로 돌아오는데에 시간이 오래걸릴수도 있습니다. **따라서, 코딩하고있는 개발자를 방해하는 것은 다른 개발자가 리뷰를 기다리게 만드는 것 보다 비싼 비용이 소모됩니다.**

- 대신, 리뷰를 하기 전에 개발자 자신의 업무가 중단되는 시점을 기다립니다. 이 시점은 코딩 작업이 완료될 때, 점심식사 후에, 회의가 끝나고, 차 한잔을 마시고 돌아오는 것 등이 될 수 있습니다.

## 5.4 빠른 응답 (Fast Response)  

- 코드 리뷰의 속도는 전체 리뷰를 통과하고 CL이 merge되는데 걸리는 시간이 아니라, 응답 시간이 중요합니다. 전체 과정도 빨라야 하지만, **전체 과정이 빠르게 일어나는 것 보다 개별적인 반응이 빨리오는 것이 훨씬 더 중요** 합니다.
- 만약 당신이 너무 바빠서 CL에 대해 완전한 리뷰를 할 수 없다면 다음과 같은 선택을 할 수도 있습니다.
  1. 코드 작성자에게 당신이 언제 리뷰할 수 있는지 알려주기.
  2. 빠르게 응답할 수 있는 다른 리뷰어를 제안하기.
  3. CL에 대해 전체적인 의견을 제공하기. 물론, 이 선택들은 업무가 중단되는 시점에 수행되어야 합니다.

## 5.5 Cross-Time-Zone Reviews  

## 5.6 의견이 있는 LGTM(LGTM With Comments)  

- 코드 리뷰 속도를 높이기 위해, 리뷰어가 CL에 해결되지 못한 부분의 의견(comment)을 남기면서 승인을 해야하는 상황이 있습니다.

  - 코드 작성자가 남긴 의견을 적절히 처리할 것이라고 확신할 수 있을때.
  - 사소한 부분이며 코드 작성자가 반드시 수행할 필요가 없을때.

  명확하지 않은경우, 리뷰어는 자신이 위의 선택지중 어떤 것을 의도하는지 명시해야합니다.

![image-20191009140403293](https://tva1.sinaimg.cn/large/006y8mN6gy1g7rv6n4qq4j30xs04474u.jpg)

## 5.7 큰 CL(Large CLs)  

- 만약 누군가가 당신에게 너무 큰 크기의 코드 리뷰를 요청했는데 그것을 언제 검토할 수 있을지 확신할 수 없다면, CL을 나누어 다시 리뷰를 요청하도록 해야합니다. 이는 코드 작성자에게 추가 작업이 필요하지만 리뷰어에게는 일반적으로 매우 유용한 방법입니다.
- CL을 더 작은 크기로 나눌 수 없고 전체 내용을 신속하게 리뷰할 시간이 없다면, 최소한 CL의 전체 설계에 대한 의견을 코드 작성자에게 보내 개선을 요청합니다. 
- 리뷰어의 목표 중 하나는 **코드 작성자의 interrupt된 상황을 해결하고(should be always unblock the developer), 코드의 상태를 희생하지 않으면서도 신속하게 추가 조치를 취할 수 있도록 만드는 것**입니다.

## 5.8 시간 경과에 따른 코드 리뷰 개션(Code Review Improvements Over time)  

- 이 지침을 따르고 코드 리뷰가 엄격한 경우, 전체 코드 리뷰 프로세스가 시간이 경과함에 따라 점점 더 빨라지는 경향이 있습니다. 개발자는 정상적인 코드에 필요한 사항을 배우고 처음부터 훌륭한 CL의 리뷰를 요청함으로 리뷰 시간이 단축됩니다. 리뷰어는 리뷰 프로세스에 불필요한 대기 시간을 쓰지 않고 신속하게 응답하는 방법을 배우게 됩니다.
- 하지만 **리뷰 속도 향상을 위해 코드 리뷰의 기준이나 품질을 타협하면 안됩니다.**

## 5.9 긴급상황 (Emergencies)

CL이 전체 리뷰 프로세스를 매우 빠르게 통과해야하는 경우 품질 가이드 라인이 완화되기도 합니다.

[What is an emergency?](https://google.github.io/eng-practices/review/emergencies.html#what)

---

# 6. How to write code review comments  

- 친절하게 하세요.
- 당신이 그렇게 생각한 이유를 설명하세요.
- 문제를 지적하고 코드 작성자가 결정할 수 있게하거나 명시적인 지침을 제공하세요.
- 코드 작성자가 복잡한 코드를 리뷰어에게 설명하는 대신 코드를 단순화 하거나 주석을 추가하도록 말해주세요

## 6.1 예의(Courtesy)  

- BAD: "동시성으로 얻는 이점이 없는데 왜 thread를 사용한거죠?"
- GOOD: "여기서 동시성 모델을 사용하면 실제 성능상의 이점 없이 코드의 복잡성이 증가됩니다. 성능상의 이점이 없기 때문에 여러 thread 대신 단일 thread를 만드는 것이 가장 좋습니다."

## 6.2 이유를 설명하기 (Explain Why)  

-  리뷰어의 의도, 리뷰어가 따르고 있는 모범사례(best practice) 혹은 리뷰어의 제안이 어떻게 코드의 품질을 향상시키는지에 대해, 좀 더 많은 설명을 하는 것이 적절합니다.

## 6.3 가이드 제공하기 (Giving Guidance)  

- **일반적으로 CL을 수정하는 것은 리뷰어가 아니라 코드 작성자에게 책임이 있습니다.** 그렇기 때문에, 리뷰어가 세부 설계를하거나 코드 작성자를 위해 코드를 작성할 필요는 없습니다.
- 코드 리뷰의 첫 번째 목표는 최상의 CL을 작성하는 것입니다. 두 번째 목표는 코드 작성자의 기술을 향상시켜 시간이 지남에 따라 리뷰가 덜 필요하게 만드는 것입니다. 때문에 직접적인 가이드, 제안, 코드가 코드 작성자에게 더 도움이 될 때가 있습니다.

## 6.4  코드 작성자의 설명 받아들이기(Accepting explanation)  

- 만약 리뷰어가 리뷰어가 이해하지 못하는 코드의 설명을 코드 작성자에게 요청하면, 보통 코드 작성자가 **코드를 다시 명확하게 작성해야 합니다.** 때때로 지나치게 복잡한 코드를 설명하는 것만 아니라면 주석을 추가하는 것도 적절한 대응입니다.
  

---

# 7. Handling pushback in code reviews  

때로는 개발자가 리뷰한 의견에 반대할 수도 있습니다. 그들은 리뷰어의 제안에 동의하지 않거나 너무 엄격하다고 불평할 것입니다.

## 7.1 누가 옳은가?  

- 코드 작성자가 리뷰어의 제안에 동의하지 않은 경우, 먼저 리뷰어의 의견이 옳은지 생각해보아야 합니다. 코드 작성자들은 리뷰어보다 코드를 더 잘 파악하고있는 경우가 많기 때문에, 특정 측면에서는 리뷰어보다 더 나은 판단을 할 수 있습니다.
-  코드 작성자의 주장이 합리적인가요? 코드 품질의 관점에서 의미가 있나요? 그렇다면, 코드 작성자가 옳다는 것을 알려주고 문제가 해결되도록 만들어야합니다.
- 그러나 코드 작성자가 항상 옳은 것은 아닙니다. 이 경우 리뷰어는 자신의 제안이 맞다고 믿는 이유를 추가로 설명해야 합니다. 코드 작성자의 답변에 대한 이해와 변경을 요청한 이유에 대한 정보가 모두 설명되어있는 것이 좋은 설명이라고 할 수 있습니다.
- 특히, 리뷰어의 제안이 코드 품질를 개선할 것이라고 판단되면, 변경에 대한 의견을 계속 밀고나가야 합니다. **코드 품질 개선은 작은 발걸음 부터 시작됩니다.**
- **항상 예의를 지키고, 단지 동의하지 않을 뿐 리뷰어가 코드 작성자의 말을 경청하고 있다고 알려야 합니다.**

## 7.2 코드 작성자가 화나지는 않을까? (Upsetting Developers)  

실제로 코드 작성자가 화를 내는 경우는 리뷰어의 고집스러운 주장이 아닌, 리뷰어가 의견을 작성한 방식이 문제일 확률이 큽니다.

## 7.3 나중에 다듬기(Cleanning It Up Later)  

- 리뷰어의 의견에 반대하는 일반적인 원인은, 코드 작성자가 일을 빨리 마무리 짓고싶어하기 때문입니다. 그렇기 때문에 코드 작성자가 나중에 코드를 정리할 것이라고 말하고, 리뷰어는 이 CL을 동의해야 하는 상황이 올 수도 있습니다.

- 일부 개발자는 코드를 정리하는 후속 CL을 즉시 작성하지만, 경험에 따르면 코드 작성자가 원래 CL을 작성한 후 시간이 더 많이 흐를수록 이러한 `정리 작업`이 일어날 가능성이 낮아집니다. 실제로 코드 작성자가 현재 CL을 작성한 직후에 정리 작업을 수행하지 않으면 코드는 정리되지 않습니다. 이는 코드 작성자가 무책임한 것이 아니라, 할 일이 많고 다른 작업으로 인해 정리 작업이 잊혀지기 때문입니다.

- 그렇기 때문에, 리뷰어는 CL이 merge되기 전에 코드 작성자가 지금 `정리` 작업을 해야한다고 말하는 것이 좋습니다. 나중에 정리를 하는 것은 코드 품질을 떨어뜨리는 일반적인 방법입니다.

- 코드 작성자는 CL이 복잡성을 증가시키는 경우 긴급한 상황이 아니면 리뷰를 요청하기 전에 CL을 정리해야 합니다. **만약 불가피하게 CL을 즉시 정리할 수 없는 경우, 코드 작성자는 정리 작업을 위해 task를 만들어 자신에게 할당해야 합니다. 혹은 TODO 주석을 추가하는 것이 선택지가 될 수도 있습니다.**

## 7.4 엄격함(strictness)에 대한 일반적인 불만  

- 이전에 상당히 느슨한 코드 리뷰를 받았던 개발자에게 엄격한 리뷰를 하는 순간 일부는 크게 불평할 것입니다. 이런 경우 리뷰 속도를 높이면 일반적으로 불만이 사라집니다.

- 이런 불만이 사라지는데까지 몇 달이 걸릴 수 도 있습니다. 하지만 결국 개발자는 엄격한 코드 리뷰의 가치를 깨닫게 되며, 때로는 가장 강하게 불평했던 사람이 엄격한 코드 리뷰의 가장 강력한 지지자가 되기도 합니다.

## 7.5 갈등 해결

- The Standard of Code Review 다시 살펴보기

