## 네트워크 모델

### 01 계층 구조의 개념

### 02 기본적인 프로토콜 요소

### 03 서비스 프리미티브(primitive)



#### 모듈화

- 독립적으로 동작하면서 상호유기적으로 통합 가능해야 함(적절한 인터페이스 필요)



#### 계층화된 모듈 구조

- 상위 계층이 하위 계층에서 제공하는 서비스를 요구하는 방식으로 동작
- 모듈화된 계층 프로토콜 구조의 장점
  - 크고 복잡한 시스템을 작고 간단한 시스템들로 재구성 가능  
    \- 이해하기 쉽고, 설계 및 구현 용이
  - 모듈이 연동할 수 있는 인터페이스 제공
  - 전송 매체 양단의 호스트가 수행하는 프로토콜은 상호 대칭 관계
  - 각 계층의 오류를 수정하거나 개선하는 경우 시스템의 교체 없이 해당 모듈의 교체로 가능
- 단점은 무엇일까?
  - 특정계층이 불필요하더라도 사용할수 밖에 없는 경우 발생.
  - 계층별 인터페이스 구현이 성능 저하

#### 프로토콜 설계 시 주요 고려 사항

- 주소 표현
  - 상대방을 구분할 수 있는 방법 필요.
    - 주소 체계
  - 호스트 주소
  - 그룹 주소
    - 브로드캐스트
    - 멀티캐스트



- 오류 제어
  ​
- 흐름 제어
- 데이터 전달 방식



#### 서비스의 종류

- 연결형(connection-oriented)
  - 전달경로를 설정하는 연결설정 과정 필요.
  - 데이터 전송 단계
  - 연결 해제 과정 필요.
  - CONNECT / DATA / DISCONNECT
- 비연결형
  - 연결 설정 및 해재 과정 없이 바로 데이터 전송
  - DATA

http://www.ktword.co.kr/m/abbr_view.php?m_temp1=464

서비스 프리미티브란? 가장 기본적인 것(동작)에 대한 의미적 표현을 주로 뜻함.

계층간의 서비스로써의 '프리미티브(동작)'을 뜻한다.

![](https://ws4.sinaimg.cn/large/006tKfTcgy1fno2jgne3wj31ac13u12d.jpg)





## OSI 7계층 모델

![](https://ws3.sinaimg.cn/large/006tKfTcgy1fno2ljasgyj31180rc12y.jpg)



- 두개의 호스트가 각각 7계층으로 구성된 모듈을 수행
- 송신 호스트의 응용계층에서 하위계층으로 순차적으로 전달되어 물리계층까지 도달
- 물리계층을 통해 수신 호스트로 데이터가 이동하고, 순차적으로 상위 계층으로 전달되어 응용계층까지 도달
- 송신 측에서 하위 계층으로 이동할 때 각 계층 프로토콜에서 정의한 헤더(header)추가
- 수신 측에서 상위 계층으로 이동할 때 순차적으로 헤더 정보를 처리하고 제거

**그 헤더마다 뭐가 붙어있는가에 따라 중요해짐!!**

### 중계 기능

- 중계 기능(라우터: Router)의 경우 7계층이 아닌, 네트워크 계층까지의 기능만 수행

  - 라우팅(Routing)  

    \- 경로배정기능  
    \- 헤더 정보를 해석하여 적절한 경로로 전달  
    \- 다음 라우터로 보내기 전에 헤더 정보를 적절히 수정하여 전송

![](https://ws3.sinaimg.cn/large/006tKfTcgy1fno2rntba8j30na0oa7b3.jpg)

#### 01 물리(Physical) 계층

 \- 전송 매체의 물리적(기계적, 전기적) 인터페이스에 관한 사항 기술. (개별 정보의 비트bit 교환 문제)  
\- 하드웨어(hardware)로 구현  
\- 데이터의 전송속도, 클럭(clock)동기화, 물리적 연결 형태 등

#### 02 데이터 링크(Data link) 계층

\- 물리계층을 통해 전송하는 데이터의 물리적 전송 오류를 해결하고 흐름 제어 제공  
\- 두 개의 노드가 1:1로 직접 연결된 환경에서 데이터 전송 기능 지원  
\- 프레임(frame)
||  헤더  |  데이터  |  트레일러  ||
\- 데이터 링크 계층을 통해 전송되는 데이터  
\- 헤더에 포함되는 정보는? MAC 주소, 오류 제어에 관련된 추가 정보(오류 검출 정보, 순서번호), 흐름 제어에 관련된 추가 정보(버퍼(원도우)크기, Ready/Not ready 플래그 등)  
\- 효율적인 처리를 위해 트레일러(trailer)를 이용하기도 함

#### 03 네트워크(network) 계층

\- 네트워크 주소를 기반으로 호스트 간 데이터 전송 경로를 결정하는 라우팅 문제 처리  
​	\- 전달 경로 설정은 사전에 미리 정해진 경로를 활용하는 정적과 네트워크 상황등을 고려하여 판단하는 동적이 있다.  
\- 패킷(packet) => 네트워크 계층에서의 전송 데이터 명칭  
\- 혼합 제어(Congestion control)  
​	\- 네트워크를 이용하여 전송하는 데이터가 과도하게 많은 경우 전송속도가 떨어지는데, 이를 조절한다.  
​	\- 네트워크 계층에서 혼잡제어를 하지 않는 경우 전송계층에서 수행하기도 함.
**네트워크 계층과 전송계층으 흐름제어를 하는데 어떻게 다른가?**

#### 04 전송(transport) 계층

\- 송신 프로세스와 수신 프로세스를 연결하느 End to End 통신 기능 제공  
\- 컴퓨터 내부에서 논리적으로 구축되는 통신 담당자 사이의 문제 처리  
​	\- 전송 속도, 전송 오류, 흐름 제어 등  

#### 05 세션(session) 계층

\- 상위적(논리적) 연결 개념인 세션 기능 제공  
\- 대화(dialog) 제어  
\- 토큰(token) 제어  
\- 동기화(synchronization) 

#### 06 표현(presentation) 계층

\- 데이터의 의미(semantic)와 표현방법(syntax)을 처리  
\- 통신 양단에서 서로 이해할 수 있는 표준 방식으로 코딩(coding)  
\- 암호화/압축 기능도 처리

#### 07 응용(application) 계층  

\- 사용자에게 유용한 다양한 서비스  
\- 예_ http(hypertext transfer protocol) / ftp(file transfer protocol) / telnet / e-mail



## TCP/IP 모델

TCP/IP 모델은 크게 **시스템 공간**과 **사용자 공간**으로 나눌 수 있다.

**시스템 공간**은  TCP/IP와 하위 계층은 운영체제 커널(kernel)내부에 구현.  
사용자가 TCP, UDP, IP 기능을 이용할 수 있도록 소켓(socket)인터페이스 제공, 인터넷 접속이 가능한 대부분의 호스트에서 지원한다.  
하위 계층은 LAN카드(H/W)와 드라이버 루틴으로 동작  

**사용자 공간**은 일반적으로 세션계층부터 응용계층까지의 기능은 사용자 프로그램으로 구현
![](https://ws3.sinaimg.cn/large/006tKfTcgy1fno3pxcorhj30k20kuq6l.jpg)



![](https://ws1.sinaimg.cn/large/006tKfTcgy1fno3qx7896j30ss0f2dib.jpg)

- TCP/UDP 사용자 데이터를 전송하는 **전송 계층 프로토콜**
- IP : 사용자 데이터를 전송하는 **네트워크 계층 프로토콜**
  - 오류 정보를 전송하는 목적으로 ICMP를 사용한다.



### ARP(Address Resolution Protocol)

- 데이터 링크 계층 프로토콜을 이용하여 데이터를 전송하려면 네트워크 주소를 데이터 링크 계층 주소로 변환하여야 함.
- 방송(Broadcast) 기반

### RARP(Reverse Address Resolution Protocol)

- 호스트의 경우 일반적으로 설정된 자신의 IP주소를 디스크에 저장
- 일부 장비는 디스크가 없는 경우가 있음
- 부팅시 LAN 카드에서 MAC주소를 알아낸 다음 RARP로 자신의 IP주소 문의
- 특정 호스트에서 질의된 MAC에 해당된 IP주소 반환

### ICMP(Internet Control Message Protocol)

- IP프로토콜에 캡슐화되어 있으나 상위 프로토콜로 보지 않고 동일 계층에 있는 것으로 간주.

![](https://ws4.sinaimg.cn/large/006tKfTcgy1fno3wc9q1rj314i0jodsj.jpg)



ICMP는? 어떤 역할?
TCP/IP 모델은 4계층의 TCP/UDP 3계층의 IP에 의해 이루어져 있는데, 이들을 올바르게 동작하기 위해서는 더 많은 프로토콜이 추가로 필요합니다. 주소 문제를 해결하기 위해 ARP, RARP와 더불어 오류 문제를 해결하기 위한 ICMP는 TCP/IP모델의 동작에서 매우 중요한 역할을  수행합니다.



ARP / RARP / ICMP 는 네트워크 계층에 속한다.   
http://dany-it.tistory.com/39

IP 주소와 MAC 주소는 프로토콜의 동작 특성상 추가로 고려할 사항이 있다. 예를 들어, 계층 2 프로토콜을 이용해 데이터를 전송하려면 목적지 호스트의 MAC 주소가 필요합니다. 자신의 IP 주소와 MAC 주소는 쉽게 얻을 수 있지만 수신자의 주소는 다르게 처리됩니다. 상대방의 IP 주소는 응용 프로그램 사용자로부터 입력되지만, 상대방 MAC 주소 정보는 어디서도 얻을 수 없다. 따라서 사용자로부터 입력된 IP 주소를 이용해MAC 주소를 구하는 기능이 필요한데, 이것을 ARP(Address Resolution Protocol)가 담당합니다.

일반적으로 호스트의 IP 주소는 하드 디스크의 특정 위치에 보관한다. 하드 디스크가 없는 시스템은 LAN 카드에 내장된 자신의 MAC 주소는 알지만, 자신의 IP 주소는 알 수 없습니다. 그러므로 MAC 주소를 IP 주소로 변환하는 RARP(Reverse Address Resolution Protocol)가 필요합니다.