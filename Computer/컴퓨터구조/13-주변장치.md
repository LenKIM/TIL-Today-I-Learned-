# 1 주변장치

CPU와 메모리를 제외한 모든 장치를 주변장치 또는 외부장치라고 부른다. 주변장치는 컴퓨터가 읽을 수 있는 정보를 저장하고, 사용자나 다른 컴퓨터 등의 주변 환경으로부터 입력된 내용을 컴퓨터가 읽을 수 있는 형식으로 변환하며, 데이터를 주변에서 이해할 수 있도록 변화하는 기계류를 일컫는다.



### 1 주변장치 병목 현상

CPU가 연간 평균 60%라는 급속한 성능 향상을 보인 반면, 주변장치는 반도체 장비와 달리 기계적인 동작을 수반한다.  

암달의 법칙?  컴퓨터 시스템을 구성하는 요소 중 성능이 가장 느린 부분에 의해 성능 향상이 제한된다.

- CPU는 무어의 법칙에 의해 1.5년마다 성능이 2배 향상되지만 주변장치의 성능은 거의 변함이 없다.



### 2 주변장치의 분류

- 저장장치 - 보조 기억장치
- 네트워크 장치 - LEN 카드
- 입출력장치(I/O 장치) - 인터페이스를 위한 입력장치와 출력장치를 총칭.



### 3 성능 척도

주변장치는 본질적으로 다른 컴퓨터 구성요소에 비해 신뢰성이 부족하고 속도가 느리다. 주변 장치의 성능을 보면 CPU처럼 지연시간과 처리율도 중요하지만 다음과 같이 장애에 대한 요소도 매우 중요하다.

- 신뢰성 - 주변장치의 기능에 대한 시간적 안정성.(고장률, 수명, 평균, 무장애 시간)
- 가용성 - 주변장치를 어느 정도 사용할 수 있는지를 나타내는 사용 가능도를 의미 / 가동률
- 유용성 - 보수성이라고도 하며, 주변장치에서 장애가 발생했을 때 복구하는 데 소요하는 시간을 의미.



이와 같은 세가지 요소를 총칭하여 RAS(Reliability, Availability, Serviceability). 컴퓨터 시스템은 RAS를 향상하도록 일반적으로 주변장치의 오류에 대한 재시행, 결함 감내, 장애 원인 규명을 용이하게 하기 위한 로깅과 같은 기능을 사용.



## 2 하드디스크(HDD)



### 1 하드디스크의 기초

하드디스크는 헤드를 사용하여 원형 평판의 표면에 존재하는 수많은 미세 자성체의 극성을 변화시켜 디지털 정보를 기록하거나 검출한다.  

- 원형 평판 (platter) - 자성 물질로 코딩된 실제 정보가 저장되는 장소로 다수의 트랙을 포함한다.
- 헤드(head) - 전도성 코일로 표면을 자화함으로써 데이터를 기록하거나 판독하는 장치
- 디스크 팔(disk arm) - 헤드를 이동하는 장치
- 구동장치(actuator) - 디스크 팔을 움직이는 모터

![](https://ws3.sinaimg.cn/large/006tKfTcgy1fmqs1bjfgoj30ct0cpq7a.jpg)



### 2 하드디스크의 논리적 구조와 데이터 구성

공장에서 출시된 하드디스크를 컴퓨터에 장착하더라도 바로 사용할 수 없다. 아직 데이터를 기록하기 위한 논리적인 구조가 만들어지지 않았기 때문에.



![](https://ws2.sinaimg.cn/large/006tKfTcgy1fmqs2nucxvj30f80913zc.jpg)

- 트랙(track) - 원형 평판 표면에 데이터를 저장할 수 있는 동심원
- 실린더(cylinder) - 동일한 동심원으로 구성된 모든 트랙, 즉 동일한 위치에 있는 모든 트랙의 집합
- 섹터(sector) - 트랙을 부채꼴 모양으로 나눈 조각을 의미. 섹터는 데이터 기록이나 전송의 기본 단위로서 일반적으로 512바이트의 데이터 영역으로 구성.

이 외에도 데이터를 기록 및 판독할 때 하나의 다발로 취급하는 클러스터라는 논리적 단위도 존재.

![](https://ws1.sinaimg.cn/large/006tKfTcgy1fmqsg3ohfbj30sg0lcach.jpg)

### 3 주소 지정 방식(addressing mode)

하드디스크에서 데이터를 취급할 때 클러스터 단위로 작업하지만 데이터를 기록하는 기본 단위는 섹터. 따라서 어떤 파일이나 데이터를 기록하거나 판독하려면 섹터의 위치를 알아야 한다. 따라서 섹터의 위치를 지정하기 위한 주소 지정 방식이 필요한데, 주소지정방식은 다음과 같은 두 가지가 있다.

- CHS(cylinder-head-sector) 주소 지정 방식
  : 하드디스크의 구조적인 정보인 실린더 번호, 헤드 번호, 섹터 번호를 사용하여 주소를 지정하는 직관적인 방식. 이 방식은 세 가지 정보를 지정해야 하므로 많은 비트가 필요. 그러나 주소를 명시하기 위한 비트 수가 제한되어 있으므로 대용량의 하드디스크에서는 문제가 발생. 각 트랙의 섹터 번호는 1부터 시작.
- LBA(logical block addressing) 주소 지정 방식
  : 하드디스크에 존재하는 모든 섹터를 1차원 배열로 나열하여 0부터 시작하는 연속적인 번호를 사용하는 주소 지정 방식. 하드디스크 내부의 펌웨어가 논리적인 주소를 물리적인 주소(실린더 번호, 헤드 번호, 섹터 번호) 로 변환한다.  오늘날 모두가 LBA 주소 지정 방식을 사용하기 떄문에 운영체제는 하드디스크를 1차원 구조로 취급.



### 4 하드디스크의 성능

일정한 속도로 회전하는 하드디스크에서 원하는 데이터를 읽어내려면 세 가지 과정을 위한 시간이 필요.  
하드디스크의 성능을 향상하려면 다음과 같은 지연 시간을 줄여야 한다.  

- 탐색 시간 - 디스크 헤드를 원하는 데이터가 있는 트랙으로 이동하는 시간
- 회전 지연 시간 - 탐색 후 디스크 헤드를 원하는 섹터까지 회전시키는 시간
- 전송 시간 - 디스크 헤드가 원하는 섹터의 데이터를 읽어서 전송하는 시간



여기서 **탐색 시간**과 **회전 지연 시간**의 합을 **디스크 접근 시간**이라고 한다. 위의 세 가지 지연 시간 외에도 큐 대기 시간과 제어기 시간이 포함되어야 한다.

- 큐 대기 시간 - 다른 프로세스가 하드디스크를 사용하기 때문에 발생하는 시간
- 제어기 시간 - 디스크 제어에 필요한 오버헤드를 의미.



**회전 지연 시간은 평균적으로 하드디스크의 절반에 해당하는 회전 시간**. 따라서 하드디스크의 회전 속도가 7,200rmp이라면 평균 회전 지연 시간은 다음과 같다.

0.5 / 7,200rpm = 0.5 / 7,200rpm * min/60sec = 0.0042sec = 4.2ms



rpm은 분당 회전수를 의미.  
오늘날 대부분의 하드디스크는 전송 시간을 줄이기 위해 다수의 섹터를 동시에 전송. 디스크 생산자는 최소와 최대 및 평균 탐색시간, 회전 속도, 전송속도 등을 사용자에게 제공.

**개선의 대표적인것은 디스크의 회전속도를 증가시키는 것!**  


**연속된 디스크 접근에 대한 요구가 발생하면 디스크 대신 디스크 캐시에 접근함으로써 속도를 향상**



## 3 광학 디스크

보조기억장치의 일종으로 CD, DVD, 블루레이 디스크.

### 1 광학 디스크의 기초

광학디스크 혹은 광디스크는 얇은 금속막을 씌운 유리나 플라스틱 원판의 표면에 전자기 스펙트럼 주변의 레이저 광선이나 파동을 사용하여 데이터를 기록하고 판독하는 대용량 디지털 저장 매체.

**광학 디스크는 하드디스크와 달리 등선 속도라는 회전 구동 방식을 사용**  
등각 속도 방식은 주로 하드디스크에서 사용하고, 등선 속도 방식은 주로 광학 디스크에서 사용한다!  

### 2 CD

### 3 DVD와 BD

파장이 짫은 레이저를 사용하여 저장 용량을 증가!



## 4 기타 주변장치

### 1 입력장치

**키보드**  
\- 전자식  
\- 기계식

**마우스**

**터치패드**

**포인팅 스틱**

**조이스틱**

**디지타이저**

**스캐너**

### 2 출력장치

**모니터**

**프린터**

**스피커**

### 3 기타 저장장치

**플레시 메모리!!** : 기억된 내용에 대한 삭제 과정이 카메라의 플래시를 연상시킨다는 의미에서 유래됨

- NOR 형식
  : 지우기와 쓰기 시간이 긴 대신 어떤 위치에도 임의로 접근할 수 있도록 주소 - 데이터 인터페이스를 제공. 따라서 ROM을 대체하여 셋톱박스의 펌웨어 또는 컴퓨터의 BIOS등과 같이 거의 수정하지 않는 프로그램 코드를 저장하는 데 사용
- NAND 형식
  : NOR형식에 비해 기록 및 삭제 시간이 짧고 칩 밀도가 높아서 저비용으로 대용량화할 수 있따. 그러나 데이터 접근을 위한 입출력 인터페이스만을 지원하므로 하드디스크나 광학 디스크와 같은 대용량 데이터 저장장치로 사용.



## RAID

하드디스크는 프로세서에 비해 속도가 매우 느릴뿐만 아니라 장애가능성도 매우 높다. 그러나 서버와 같은 대용량 시스템의 경우 빠른 접근과 안전한 데이터 보존이 매우 중요. 여기에서 하드디스크의 단점인 속도와 신뢰성을 향상하기 위한 기법인 RAID에 대해 살펴보자.

### 1 RAID의 의미와 분류

프로세스의 성능을 향상하기 위한 파이프라인 기법은 프로세서를 다수의 단계로 분할하여 명령어를 병행 처리. 메모리의 성능을 향상하기 위한 메모리 인터리빙은 메모리를 다수의 뱅크로 분할하여 병행 접근. **이와 유사하게 대용량의 고속 디스크 대신에 다수의 저렴한 소용량 디스크를 배열로 구성하여 병행적으로 접근하게 함으로써 속도를 높이는 것**

**RAID(redundant array of independent disk)는 저렴하고 작은 용량의 하드디스크를 다수 묶어서 하나의 저장장치처럼 사용하는 기법.** 가장 대표적인 예로, 운영체제에 의해 다수의 물리적인 하드디스크를 하나의 논리적인 하드디스크로 구성하여 대용량 저장장치로 인식시키는 기술.

RAID는 접근 속도와 신뢰도를 동시에 향상시키는 기술로, 접근 속도를 향상하기 위해 **스트라이핑**(striping)을 사용하고 신뢰도를 향상하기 위해 중복성을 사용. **스트라이핑은 파일을 다수의 조각으로 분할하여 다수의 하드디스크를 분산하는 방식을 말함**  
RAID는 등급에 따라 중요 목적인 신뢰도, 가용성, 속도 및 용량에 대한 균형을 제공  
RAID 0을 제외한 나머지 등급은 모두 디스크 장애나 섹터 읽기 오류에 대해 보호해준다.  
RAID 6, 7, 10 등과 같이 지속적으로 새로운 방식이 개발되지만 여기서는 6까지만 본다.



### 2 RAID 0

패리티나 미러링 없이 스트라이핑만으로 구성된 RAID로 스트라이핑 방식이라고도 한다.

### 3 RAID 1

패리티를 사용하지는 않지만 데이터 디스크를 스트라이핑하고, 데이터 디스크를 동일하게 복사한 반사 디스크로 구성된 RAID  
미러링 혹은 새도잉이라고 함.

### 4 RAID 2

비트 수준으로 분산 저장한 데이터 디스크와 해밍코드(Hamming code)를 저장하는 검사 디스크로 구성된 RAID, 오류 수정 코드를 가진 비트 인터리브(bit- interleaved with ECC)방식이라고도 함. 데이터를 비트 단위로 데이터 디스크 0~3까지 라운드로빈방식으로 저장되며, 4개의 데이터 디스크에 대한 해밍 코드 값은 검사 디스크 DISK 4 ~ DISK 6 에 저장.

### 5 RAID 3

비트 단위로 분산 저장된 데이터 디스크와 하나의 패리티 디스크로 구성된 RAID로, 비트 인터리브된 패리티(bit-interleaved striping with parity)방식이라고도 한다. 하나의 패리티 디스크를 사용하기 때문에 중복성에 의한 추가 비용이 적다.

### 6 RAID 4

블록 단위로 분산 저장된 데이터 디스크와 하나의 패리티 디스크로 구성된 RAID로, 블록 인터리브된 패리티(block-interleaved striping with parity)방식이라고도 한다. 추가 비용이 적고 오류 수정과 검출 기능이 RAID 3과 유사. 비트 단위가 아니라 블록 단위로 분산되어 있이므로 블록보다 작은 단위의 입출력 요청이 있을 경우 하나의 데이터 디스크에만 접근한다. 따라서 다수의 입출력 요청이 있을 때 병렬로 처리할 수 있다. 그러나 데이터 디스크와 달리 패리티 디스크는 항상 접근해야 하므로 패리티 디스크가 병목 현상이 될 수 있다.

*무슨말이지?*  
*RAID4 는 RAID3와 달리 트랜잭션 지향 애플리케이션에 적합하며, 높은 대역폭을 요구하는 애플에 적합하지 않다.(?)*

### 7 RAID 5

데이터를 블록 단위로 분산하고 패리티도 분산하여 통합 저장한 하드디스크로 구성된 RAID로, 블록 인터리브된 분산 패리티(block-interleaved striping with distributed parity)방식이라고도 한다. RAID4와 같이 데이터를 블록 단위로 스트라이핑한다. 이는 데이터 디스크와 패리티 디스크의 구분이 없다. 현재 가장 널리 쓰이는 방식.

### 8 RAID 6

5와 유사하게 블록 단위의 데이터와 패리티를 분산하여 저장하지만 신뢰성을 향상하기 위해 두 가지 패리티 정보를 사용하는 RAID로, 블록 인터리브된 이중 분산 패리티(block-interleaved striping with double distributed parity) 방식이라고도 한다.



![](https://ws2.sinaimg.cn/large/006tKfTcgy1fmqvffi20ej30go08q0ss.jpg)







## 6 입출력 시스템

입출력장치는 CPU, 메모리, 저장장치와 함께 컴퓨터를 구성하는 주요장치.

### 1 개요

왜? 입출력 장치들은 CPU와 통신할 수 없는가?

- 입출력장치는 기계적이고 전자기적인 장치이므로 전기적인 장치인 CPU와 직접 통신 X
- 입출력 장치의 데이터 전송률은 CPU에 비해 매우 느리다. 따라서 속도 차이를 적절하게 완충하지 않으면 성능이 매우 떨어짐
- 입출력장치의 데이터 형식과 길이는 CPU와 다름
- 입출력장치의 운영 방식은 다른 입출력장치와도 다르기 때문에 다른 입출력 장치의 동작을 방해하지 않도록 독자적으로 제어.



그래서, 컴퓨터 시스템은 시스템버스와 주변장치 사이에 특별한 하드웨어 인터페이스인 IO모듈을 포함하여 모든 입출력 동작을 감독하고 동기화한다.



### 2 IO모듈(IO 컨트롤러네!)

CPU와 입출력장치 사이의 단순한 인터페이스일 수도 있고, 독립적인 다수의 입출력장치를 제어할 수 있다. IO모듈은 연관된 입출력장치를 동작시키기 위해 다음과 같은 기능 제공

- 연관된 입출력장치를 동작시키는데 필요한 제어
- 프로세서 및 입출력장치와 통신하기 위한 명령 해독과 입출력장치 주소 인식
- 전송 속도 차이를 완충하기 위한 버퍼링
- 오류 검출



### 3 장치 구동기

입출력장치를 구동하려면 장기 구동기라는 입출력 소프트웨어가 필요. 장치 구동기는 디바이스 드라이버혹은 줄여서 드라이버라고도 하며, 장치에 종속적인 코드를 포함



## 7 입출력장치의 주소 지정

입출력장치에 대한 주소의 범위와 용도도 제공한다 컴퓨터 시스템이!  
그래서 주소 지도를 보고 CPU가 입출력장치와 상호작용한다는 것은 결국 입출력장치에 포함된 장치 레지스터와 상호 작용한다는것.  

### 1 메모리 사상 입출력 방식(memory-mapped IO)

입출력을 위한 제어-상태 레지스터와 데이터 레지스터를 메모리 주소공간으로 포함하는 방식, 즉 장치 레지스터의 주소를 지정하기 위해 메모리 주소 공간의 일부를 할당. 따라서 메모리 사상 입출력 방식은 CPU가 장치 레지스터를 메모리와 동일하게 취급하며, 메모리와 입출력장치가 동일한 주소버스를 사용하는 구조! 오늘날의 32비트는 거의 이방식을 활용한다.

![](https://ws1.sinaimg.cn/large/006tKfTcgy1fmqvusidv1g30bt07vdfy.gif)

### 2 분리형 입출력 방식(isolated IO)

 분리형 입출력 방식은 입출력장치를 위해 별도의 주소 공간을 사용하는 방식으로 입출력 전용 또는 고립형 입출력 주소 지정이라고도 한다. 별도의 주소 공간이 있기 때문에 장치 레지스터의 주소는 0번지부터 시작.



![](https://ws4.sinaimg.cn/large/006tKfTcgy1fmqvx5kj1bj30qo0k0dhl.jpg)