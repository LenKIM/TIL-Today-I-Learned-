참고 - https://thrillfighter.tistory.com/385

# 정규표현식 탐용적 수량자

탐욕적 수량자, 또는 욕심쟁이(greedy)수량자라고도 한다. 이와 반대되는 것은 게으른(lazy) 수량자.

수량자란, 말 그대로 몇 개를 선택할지 결정하는 것으로 *.+,?,{n}, {n,}, {n,m} 등이 있다. 이런 수량자는 기본적으로 탐욕적(greedy) 수량자이다. 그렇다면 탐욕적이란 의미가 수량자에 어떻게 적용되는지 알아보면, 여기서 탐욕적이라 함은 백트래킹(backtracking)알고리즘을 사용.



설명하자면, 우선 정규표현식을 검사할 문자열에서 전체를 한 덩어리로 보고 정규표현식과 매치되는지를 검사한다. 만약 매치되지 않는다면 끝에서 한 문자를 뺀후 다시 검사. 이렇게 뒤에서 하나씩 빼가면서 맞을 때 까지 검사해 나간다.

### 탐욕적 수량자 *

---

이렇게 정규표현식과 매칭되는 가장 큰 덩어리를 찾으려고 하기 때문에 탐요적이라고 이름지었다. 설명만으로는 감이 안오기 때문에 다음 예제를 보면 쉽게 이해할 수 있다.



다음은 내가 겪었던 예시이다.

![](https://ws4.sinaimg.cn/large/006tNc79gy1g2kfm7gpfdj30e50793zt.jpg)

여기서 내가 원했던 것은 두 가지(**ap1, ap-file1, ap-standby1 / access_xxx**) 부분이였다.

그래서 처음 앞 부분만 가져오는 정규표현식으로 다음과 같이 작성했다.

`(ap.*)+[\_|\.]`

이렇게 작성할 경우, 다음과 같은 상황을 맞닥뜨리게 된다.

![](https://ws1.sinaimg.cn/large/006tNc79gy1g2kfjm5vg4j30dl077jst.jpg)

분명 내 생각에는 앞에서부터 탐색해서 '_', ',' 를 만날 때까지만 탐색할 줄 알았으나, 뒤에서부터 되는것을 보고 의아해했고,  찾아보니, 탐욕적 수량자때문이라는 사실을 알았다.



이 문제를 해결하기 위해서는 다음과 같이 '?' 를 작성하여 게으른 수량자 `*?` 를 표기하면 된다.

`(ap.*?)+[\_|\.]`

![](https://ws2.sinaimg.cn/large/006tNc79gy1g2kfo6lblaj30f607d3zz.jpg)



### 게으른 수량자 *?

---

위와 같이 의도에 맞는 정규표현식은 게으른(lazy)수량자를 사용하면 되겠다. 게으른 수량자는 단순하게 ?를 탐욕적 수량자의 뒤에 붙여주면 된다.,



게으른 수량자는 단순히 앞에서부터 순서대로 정규표현과 매치되는지 찾아간다. 이런 특성으로 탐욕적 수량자와 문자의 검사량에 차이가 난다. 원본 문자열의 길이가 길면 길수록 탐욕적 수량자는 더 많은 일을 할 수 밖에 없다. 단 매칭되는 문자열이 문자열 전체 하나만 있을 경우는 탐욕적 수량자가 효율적일 수 있다.