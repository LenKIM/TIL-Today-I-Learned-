## 1. Index 기본 개념
Index의 간략적 개요
- index -> 디비의 검색을 빠르게 하기 위해 미리 데이터의 순서를 정리해두는 과정
- MongoDB는 고정된 스키마는 없지만 원하는 데이터 필드를 인덱스로 지정하여 검색결과를 빠르게 하는 것이 가능
- NOSQL에서는 index를 잘 설계해야 최대의 효율이 가능
- MongoDB를 효율적으로 사용하고 하드웨어의 성능을 최대로 끌어내려면 index의 종류와 사용 방법에 이해 필요
- MongoDB는 B트리 구조로 index를 구현
- 고유 index, 회소 index, 다중 키 index 지원
- 복합 index, 단일 index 지원

Index 개념
- Index는 도큐먼트를 쿼리해오기 위한 작업량을 줄임
    - 적당한 index가 없으면 질의 조건을 만족할 때까지 모든 도큐먼트를 순차적으로 스캔
만약 쓰는 횟수가 많다면, 어느 정도 인덱스를 포기하고, 읽는 것이 많다면 따로 collections을 만들어서 따로 인덱스를 만들어 사용하자.
- 한 쿼리당 하나의 index만 유효
- 두 개의 index가 필요하다면 복합 index를 사용
    - a와 b필드로 구성된 복합 index를 가지고 있다면 a에 대해 단일 index는 제거해도 됨
    - 복합 index에서 키의 순서는 매우 중요
- _id는 기본적으로 생성되는 index로 도큐먼트를 가르키는 유일한 키값으로 사용

**Index는 B트리를 사용한다!**
- MongodB는 내부적으로 B트리 알고리즘을 이용하여 인덱스 구성
- B트리는 1970년대 후반부터 데이터베이스의 레코드와 인덱스로 활발히 사용

- B트리의 데이터베이스 인덱스에 적합한 두 가지 특징
  1. 정확한 일치, 범위조건, 정렬, 피리픽스일치 등 다양한 쿼리를 용이하게 처리하도록 도와준다는 점
  2. 키가 추가되거나 삭제되더라도 밸런스 유지한다는 점

  B트리
  - 트리구조와 유사한 데이터 구조
  - 트리에서 각 노드는 여러 개의 키를 갖는 것이 가능
  - MongoDB에서 사용하는 B트리는 새 노드에 대해 8,192바이트를 할당
  (각 노드가 수백 개의 키를 가질수 있음을 의미)
  - 인덱스키의 평균 크기에 따라 달라질 수도 있는데, 보통 키의 평균적인 크기는 30바이트 안팎임.
