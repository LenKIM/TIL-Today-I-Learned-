<!DOCTYPE html>
<html>
  <head>

    <meta charset="utf-8">
    <script src ="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src ="/socket.io/socket.io.js"></script>
    <script>
    //HTML 문서가 모두 준비되면
    $(document).ready(function() {
      //변수를 선언
      const socket = io.connect();
      //이벤트를 연결
      socket.on('message', (data) => {
        //추가할 문자열을 만듬
        var output = '';
        output += '<li>';
        output += '   <h3>' + data.name + '</h3>'
        output += '   <p>' + data.message+ '</p>'
        output += '   <p>' + data.date+ '</p>'
        output += '   </li>'
        //문서 객체를 추가
        $(output).prependTo('#content');
          });
        $('button').click(function() {
          socket.emit('message', {
            name: $('#name').val(),
            message: $('#message').val(),
            date: new Date().toUTCString()
        });
      });
    })
    </script>
    <title>Web Chat</title>
  </head>
  <body>
    <h1>Socket.io Chat</h1>
    <p>chat With Node.js</P>
    <hr />
    <input id = "name" />
    <input id = "message" />
    <button>Button</button>
    <ul id = "content">
    </ul>
  </body>
</html>
